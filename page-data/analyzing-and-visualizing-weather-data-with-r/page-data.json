{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/analyzing-and-visualizing-weather-data-with-r","result":{"data":{"post":{"slug":"/analyzing-and-visualizing-weather-data-with-r","title":"Analyzing and visualizing weather data with R","date":"24.01.2020","tags":[{"name":"R","slug":"r"}],"description":null,"canonicalUrl":"https://oisinbates.com","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Analyzing and visualizing weather data with R\",\n  \"date\": \"2020-01-24T00:00:00.000Z\",\n  \"tags\": [\"R\"],\n  \"slug\": \"/analyzing-and-visualizing-weather-data-with-r\",\n  \"canonicalUrl\": \"https://oisinbates.com\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Having moved from the West of Ireland to the Pacific North West I was interested to observe that, while both people regularly complain about the rain, the rainfall patterns appeared quite different. That initial observation led me to wonder how similar, or different, the patterns are between the two regions? This blog describes the process of accessing historical weather data, processing the dataframes with R, and visualizing the findings with R\\u2019s ggplot2 package. In doing so I will hopefully reach a conclusion as to which \\u2018West Coast\\u2019 has more cause to complain about rainfall. The weather stations we\\u2019ll reference are located at Shannon and Vancouver international airports.\"), mdx(\"h3\", null, \"Sourcing and Accessing Data\"), mdx(\"p\", null, \"Initial Google searches will likely lead to the R package \\u2018weatherData\\u2019. It\\u2019s worth noting that despite its prominence in google search results, this package \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/Ram-N/weatherData/issues/41\"\n  }, \"no longer works\"), \" due to its API source, Weather Underground, moving to a paid model. A follow-up search may reference Weather Underground\\u2019s own R package, though it\\u2019s worth noting that their free-tier requires users to maintain a personal weather station in order to receive an API key.\"), mdx(\"p\", null, \"I found the most appropriate solution was to pull data directly from the relevant national meteorological services. As many meteorological services have begun publishing their own R packages in recent years, Canadian data is accessible from the \\u2018weathercan\\u2019 package. The Irish Meteorological Service, Met \\xC9ireann, does not maintain an R package, but provides csv data for download from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.met.ie/ga/climate/available-data/historical-data\"\n  }, \"met.ie\"), \".\"), mdx(\"h3\", null, \"Determining Metrics\"), mdx(\"p\", null, \"While Irish records track all forms of precipitation under a single count, Canadian records \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://climate.weather.gc.ca/glossary_e.html#totalPrec\"\n  }, \"differentiate between \\u2018total rain\\u2019 and \\u2018total precipitation\\u2019\"), \". The latter includes all forms of precipitation while the former includes \\u2018all liquid precipitation\\u2019 but excludes snowfall. As snow is far more common in Vancouver than Shannon and the subject of this study is rainfall, it\\u2019s tempting to compare Shannon\\u2019s total precipitation to Vancouver\\u2019s total liquid precipitation. Ultimately though, it makes the most sense to stay consistent and compare identical metrics.\"), mdx(\"h3\", null, \"Importing Data\"), mdx(\"p\", null, \"For the csv file from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.met.ie/ga/climate/available-data/historical-data\"\n  }, \"met.ie\"), \", it\\u2019s necessary to read from line 25 onwards, as the lines before this contain the dataset\\u2019s glossary. For the Canadian data, it\\u2019s necessary to concatenate data from two datasets as Vancouver International Airport\\u2019s weather station changed in June 2013.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-r\"\n  }, \"# get shannon data.\\n# Csv file sourced for 'SHANNON AIRPORT' weather station at https://www.met.ie/ga/climate/available-data/historical-data\\nshannon_df <-\\n  read.csv(\\\"dly518.csv\\\", skip = 24)\\n\\n# get vancouver data\\npre_2013_van_df <-\\n  weather_dl(\\n    station_ids = 889,\\n    interval = \\\"day\\\",\\n    string_as = NULL,\\n    start = \\\"2010-01-01\\\",\\n    end = \\\"2013-06-12\\\"\\n  )\\npost_2013_van_df <-\\n  weather_dl(\\n    station_ids = 51442,\\n    interval = \\\"day\\\",\\n    string_as = NULL,\\n    start = \\\"2013-06-13\\\",\\n    end = \\\"2019-12-31\\\"\\n  )\\nvancouver_df <- rbind(pre_2013_van_df, post_2013_van_df)\\n\")), mdx(\"h3\", null, \"Standardizing the Data Frames\"), mdx(\"p\", null, \"In order to efficiently work with these data frames, it\\u2019s necessary to format their date columns, restrict their date ranges, and standardize their column names.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-r\"\n  }, \"# format dates\\nshannon_df$date <- as.Date(shannon_df$date, format = \\\"%d-%b-%Y\\\")\\nvancouver_df$date <- as.Date(vancouver_df$date)\\n\\n# filter Shannon dataframe to last ten years\\nshannon_df <-\\n  shannon_df[shannon_df$date >= \\\"2010-01-01\\\" &\\n               shannon_df$date <= \\\"2019-12-31\\\",]\\n\\n# add consistent month and year columns\\nshannon_df <- shannon_df %>%\\n  mutate(month = month(date), year = year(date))\\nvancouver_df <- vancouver_df %>%\\n  mutate(month = month(date), year = year(date))\\n\\n# standardize column names for convenience\\nsetnames(shannon_df, \\\"rain\\\", \\\"total_precip\\\")\\n\")), mdx(\"h3\", null, \"Calculating the Highest Count of Consecutive Dry Days for each Year\"), mdx(\"p\", null, \"My approach was to group each period of consecutive dry days with a unique id for each, before using these ids to get the highest count for each year.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-r\"\n  }, \"get_consec_dry_day_count <- function(df, region_name) {\\n  processed_df <- df %>%\\n    group_by(consec_dry_id = rleid(total_precip == 0)) %>%\\n    mutate(consec_dry_days = if_else(total_precip == 0, row_number(), 0L)) %>%\\n    group_by(consec_dry_id) %>%\\n    top_n(1, consec_dry_days) %>%\\n    group_by(year) %>%\\n    top_n(1, consec_dry_days) %>%\\n    mutate(location = region_name) %>%\\n    select(date, year, consec_dry_days, location)\\n  \\n  return(processed_df)\\n}\\n\\nshannon_consec_dry_day_df <-\\n  get_consec_dry_day_count(shannon_df, \\\"Shannon\\\")\\nvancouver_consec_dry_day_df <-\\n  get_consec_dry_day_count(vancouver_df, \\\"Vancouver\\\")\\nconsec_dry_day_df <-\\n  rbind(shannon_consec_dry_day_df, vancouver_consec_dry_day_df)\\n\")), mdx(\"p\", null, \"The data showed that Vancouver consistently had the highest number of consecutive dry days.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"472px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"105%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOElEQVQ4y4VUi47iMBDj/78PENryEixaXifR0jbveOVpkwtsb69S2qRJPPZ4khkA9H2P5XKJz89P7Pd7bLdb7HY7HA4HHI9HbDYbGXOe7XQ64f2JMcp3xpdSClVVycb5fI7q4wPrqsJqtcJisZBgnFuv17KOAdlncII75zKoAPJH13XQWgu4MgZ130OzP7Y8N/abpoG1VvYmdhkwhIA/SmX6IQIqhElJrQ9wEQI2KZlgz+cT2hj56UOQAHH8pua9hyvGZFoyywz54qQZATNAsTmOgLW1wzhGkf0OmE3hDwIm+QmY39Q4RjH+J6BErusBsGAYJiRLn2tGVWXAF4YEkxYCnPd/pb8xFDBrJQWmYJhYSg4vl4s4xqZDgC0kk7HyHp3zg0ncxFLxHk+t0bUtttsdiJFN4Ul4PB4/Jb/JT65zE4M+eiXgfV3jcr0KhgCy2tuugx1dlsZ8aZ2jslxa617MslpLijprcf76kiNJo2ZMLheZphGGNuXRWtkghoj0V9e5mSo4RzLEoXFiihQ2GcWI3jnJG/tP64QdGccx8FRhl88s1WAq7FiaMkqWfDqX8zpVh9nlVMwvpqQvDz6bd9nh/xY2B0kyfwca4v1w9IxGMAbBmmGs1a9nORc2a1AYkolWiM4OjAo5IrUY698A6Y6hHGfhi1yl+nu/eZgC3TQSAFNHjwzP57PIttahbVvcbrd8oTIl1+tVVHAtz/79fn8x5MdtI9f4OJGYEJgFy3665tN8ee2XgN/DZG6Vh2s3KwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Most consecutive dry days by year\",\n    \"title\": \"Most consecutive dry days by year\",\n    \"src\": \"/static/54fc0a574f8dd76bc3dfaf20bb9d4578/1b0b6/most_consecutive_dry_days_by_year.png\",\n    \"srcSet\": [\"/static/54fc0a574f8dd76bc3dfaf20bb9d4578/5243c/most_consecutive_dry_days_by_year.png 240w\", \"/static/54fc0a574f8dd76bc3dfaf20bb9d4578/1b0b6/most_consecutive_dry_days_by_year.png 472w\"],\n    \"sizes\": \"(max-width: 472px) 100vw, 472px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"The data showed that Vancouver\\u2019s driest consecutive periods were typically in the months of July-September while Shannon was far less predictable. These dates could be included as tooltip values if creating interactive plots.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"525px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"142.91666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAAsTAAALEwEAmpwYAAADO0lEQVQ4y3WUW3PbOAyF9f9/2zbdfWjSh93WlkgAvJOSLMW8ZYdUnHqcFqPxk88A+M4hhnm7MqH/+vLkfHi9pvWyf3t+mThfL/u///14evr6/Pzy7fnly9NXxiEs68vL969///PzdA7zOrhlldpwzolIaxPCzBiXSuVcjDH7/rq/vm7bvu17TCnGBIDjNFnnrtc4aB+E0kJKEkJIGUIARK11KTWEUGqtb78q5YxEnPMQQkzpECspZdMTLcuCiM65nEsT31etKWcAOJ3PxtqbWOsm7jXPMxIZa3Mpy7qWWu+/lDMRTdPkvG9i5XzvLIhI3sY2xpRalVIxxvveMSVAHMfROhdjHJQLJBX1klI67993rtUYk3J+6AwA5/PZOnu3sxDUiYUQENFam2t13ue+6r0YEdvYzjUxKs0RRUettXbOMcZUsyprrWOM+a5ijIyxcwd2vV4HOy/KWBJtZm2M874brmutrX/O9a4OYIxzH0LqwLrPvVpI5hkAlFKlFNsMy/fAUkqIyBjz3jdgpA2QUKoxU0otywIAzrlDnFJ6EHPOT6eTMabT9oGUElIConWudUYUUnar9GfaDRhjzeeYhjPj7b9SYndo7uIGrJRt2+pb/Swex9EfIZmwDQ2IAO3HOvexs/f+YecjJIwxIcS27QNDklqLnjAi+ngYtSfsgXbOWQjBOUfEy+UynNrYbe6PeE6MtXiWIqV6ABY77UO8rpdj7ONhSACw1iKSMabWtx6SVEr9+FJqnQGQSFwu2zBCF4vjUaoQZoD+MEqnnfKDmEgAgBBdfOZAUgkhEEkrfYTkEGv9GzFie5IA0Md+79xaK6W8D3i7JEe2H0JCRN0XWm/ApG5rK2Os9x6RrLWlVGPsn8Z+F09AJBUAcM4B0Ptw87lKKWOMtdbP2QaAZtXYQ3IwRMTmM7SElVplvyR32vex3626XIYf58abSDDWru+yrowxIiqlEomHzvG2MxH1zgAoGiqttbXOeUdE3odulfrTzl28DT/HxltK2d2Tvp+hY+ffWnXrLH7RJqJxmkgIHwIHICFKrfrTATziOXVgTQxSGut0Lx/Csq5CCGNtqbWd/k8HUPaz0V7Vvv8PtFljk4ssBNsAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Table of consecutive dry days\",\n    \"title\": \"Table of consecutive dry days\",\n    \"src\": \"/static/a8e4cf25acc6fe07cdf05a16eaade395/65f66/consecutive_dry_days_table.png\",\n    \"srcSet\": [\"/static/a8e4cf25acc6fe07cdf05a16eaade395/5243c/consecutive_dry_days_table.png 240w\", \"/static/a8e4cf25acc6fe07cdf05a16eaade395/ab158/consecutive_dry_days_table.png 480w\", \"/static/a8e4cf25acc6fe07cdf05a16eaade395/65f66/consecutive_dry_days_table.png 525w\"],\n    \"sizes\": \"(max-width: 525px) 100vw, 525px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h3\", null, \"Get Monthly Insights\"), mdx(\"p\", null, \"In terms of monthly insights, I was interested in total precipitation volume, volume by ranges, and counting dry days (days with 0mm precipitation). I also checked for NA values, of which there were 28 for Vancouver and 0 for Shannon.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-r\"\n  }, \"get_monthly_insights <- function(df, region_name) {\\n  processed_df <- df %>%\\n    group_by(month) %>%\\n    summarise(\\n      na_count = sum(is.na(total_precip)),\\n      sum_precip = sum(total_precip, na.rm = T),\\n      dry_days = sum(total_precip == 0, na.rm = T),\\n      under_five_mm = sum(total_precip > 0 &\\n                            total_precip < 5, na.rm = T),\\n      five_to_ten_mm = sum(total_precip >= 5 &\\n                             total_precip < 10, na.rm = T),\\n      ten_to_fifteen_mm = sum(total_precip > 10 &\\n                                total_precip < 15, na.rm = T),\\n      fifteen_to_twenty_mm = sum(total_precip >= 15 &\\n                                   total_precip < 20, na.rm = T),\\n      twenty_plus_mm = sum(total_precip >= 20, na.rm = T)\\n    ) %>%\\n    mutate(location = region_name)\\n  \\n  return(processed_df)\\n}\\n\\nshannon_monthly_insights_df <-\\n  get_monthly_insights(shannon_df, \\\"Shannon\\\")\\nvancouver_monthly_insights_df <-\\n  get_monthly_insights(vancouver_df, \\\"Vancouver\\\")\\nmonthly_insights_df <-\\n  rbind(shannon_monthly_insights_df, vancouver_monthly_insights_df)\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"750px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"23.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArElEQVQY0y2N2w6EIAwF/f/f1AQvuIj0AsXazdKdp8lJJ51CCMdxxBjP80wpfQbXdaXBfd8+5pxdAMBvcs4TM4sIIpZS5nlW1X3fzYyZXXrvKSVVNbOcMxH5+I+f58HBsiyquq6rmbXWtm2zQYzRY0RkZh+JaCKi3jsAEFEIQUS8YeYQgpmpaozxfV8zqwOPSym/z7VWZqYBMwOAiLTWELHW2loTEQ/egbuqfgEPmR/yDV/TdgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Tibble of mm ranges\",\n    \"title\": \"Tibble of mm ranges\",\n    \"src\": \"/static/58f799ff59d01b8fef54b1f8529fccd6/44507/mm_range_tibble.png\",\n    \"srcSet\": [\"/static/58f799ff59d01b8fef54b1f8529fccd6/5243c/mm_range_tibble.png 240w\", \"/static/58f799ff59d01b8fef54b1f8529fccd6/ab158/mm_range_tibble.png 480w\", \"/static/58f799ff59d01b8fef54b1f8529fccd6/44507/mm_range_tibble.png 750w\"],\n    \"sizes\": \"(max-width: 750px) 100vw, 750px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"The resulting plots show greater precipitation volumes in Vancouver for the months of October to April, and higher counts of dry days in Vancouver for all but the month of March.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"472px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"105%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJklEQVQ4y5VUi47iMAzs/38fEhwHrFY8xCIVCk2ad+c0JqlKt+zqIrltHp3YnrGrvu/BcblcsFwuxRaLBTabDbbbLVarlczX6zWOxyP+rFbYbbdyTmst/xYMjqpMuq7D/X5H27Z4PB5iSik0TSPGPZ5RWqNRCqptkVJ6D2itlY3x5vi7jJASuhjhnRv2ZwGdtUgxIv5g9Ki8tTHvAfuUcNcaXQjynbJNwZ4WYWNEzfzx3znA2+2GumlgQ0CgZZBQ5tnKGt/mnYclsQwZKUGFIB7w9lfPkvzItCSeYQ7z2gvgfr+XW0lKmMnXMI8RLkY8SJ7WMEq9kFWAq/P5jNT3cMYgef/i0dRDGlkmuNUKPgSRFp0ZPKSAO2Ng2xZt10GPiHnHMo0hd0rh8+MDp9NJohwA67qWm2JMAykSfiYgEmhyCUmhp8E5MEoa16vD4SCxO+8RyZz3MBRviLJO0GQNEklgSrKnJNFSjyHgWtf4ulwk9Gq32z1DsPZ5OwEyCdE5RIIYIx5RzPymt2PZjEd1vV6H0pPQWDHOiTRSp59zesq9/KaHdqLDgWUueO+lc5R89d7JBW2Ios0wU3pvhc1H6TDjSpCwmM+ct4Ht3ypl3G3GuqN0KGTWt4/xW/WU7jTfHPpebnzRXRZwn0FN1udYNj96yANDuNl6kU+A8l5ymf4HkCGMOzVNulBdS8cue6WD83vM8DfAKf0cbPt/NxsB4JjW9VxX/wfcS27nmk/p0AAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Total monthly precipitation\",\n    \"title\": \"Total monthly precipitation\",\n    \"src\": \"/static/7e4e843cb09f9184c573e78359d784e2/1b0b6/total_monthly_precipitation.png\",\n    \"srcSet\": [\"/static/7e4e843cb09f9184c573e78359d784e2/5243c/total_monthly_precipitation.png 240w\", \"/static/7e4e843cb09f9184c573e78359d784e2/1b0b6/total_monthly_precipitation.png 472w\"],\n    \"sizes\": \"(max-width: 472px) 100vw, 472px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"472px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"105%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSklEQVQ4y4VVCZLiMAzk/9+jGKjiPmcYWI4cTiw76a1W7IxhYSdVwo5jt1otyQzatgWfzWaDyWSC7XaL9XqN2WyGw+GAxWKB5XKJ/X6v89VqpWOe50ifiDOIk7hxNBphOp1iPB5348cHhsMhVus1drudOqXD+XyuJHiuLMsedBAnXLTWwhiDqqrU6qpCVpbIjIENa9zHkQxFRK1pmh9A/tzvd9R1rYv8GA1tC2kaZM7Beq/vbbC4/2XI9MYNnHvvH6z1HtY51M6hSdbJMoKk4yCyYrjPgFzXMZhP2L8CVIbvANtw8NlBtBjRP4D8eD6f1SPnLoSWW8FdBIaiR8AXIUd7YEhvqYY8KCHEyLYUh8r9ME9DjixVw+PxqKn/TUMmRpI17i+KAovlEsTok8IOILsUUFlEzZJwud4mGjZiYe53HL+/cbvdOkBW+ul06jYE79SNjFRT71VXrrN0yqApi96qFIKvz0/tImIMTFXpgZyA1ME7BWRBtyLw1nblEnS1QduSSWRELH5rVVM67cvmZgwosdBBkWs4DZkFdlFTsMS8xx/2b5KUPsuMm+hiaxjvcbWCmocr0wE27QOg8x2gDRGlGe57+Xq9KqijhqEOXSwbhi0CR+2shRVBLqIaNm87hR5F0NoaXmxff6pR1JGABAnVUL3rlN96WUEJaGs0Ya93grrI3wPyDjS3axeqc73FMorv6oiMixxVUfwfkFcYKz/LMr0fo10uFy1aGr9R7xu/ZdlDQh6y/NyP8QYmGP8G6Oj58k1v6bRs/gKzDWtW0aSapgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Total dry days by month\",\n    \"title\": \"Total dry days by month\",\n    \"src\": \"/static/d45567d8640ce8d74dccb2236c2526a8/1b0b6/total_dry_days_by_month.png\",\n    \"srcSet\": [\"/static/d45567d8640ce8d74dccb2236c2526a8/5243c/total_dry_days_by_month.png 240w\", \"/static/d45567d8640ce8d74dccb2236c2526a8/1b0b6/total_dry_days_by_month.png 472w\"],\n    \"sizes\": \"(max-width: 472px) 100vw, 472px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h3\", null, \"Calculate for mm Ranges\"), mdx(\"p\", null, \"For plotting the precipitation range columns, it was necessary to convert the dataframe to long format in order to plot the data by individual facets.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-r\"\n  }, \"long_format_monthly_insights_df <-\\n  gather(\\n    monthly_insights_df,\\n    precip_mm_range,\\n    precip_day_count,\\n    under_five_mm:twenty_plus_mm,\\n    factor_key = TRUE\\n  )\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"750px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"23.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAx0lEQVQY0z2Py4qAMAxF/f+fc+XCNxaR9I2ttiWNdQY7zFlcAsnNTZp936WUAGCM0VpXrZiP/8JaK6W01mqtlVLneTYhBCK6rivnXHuIaIxBRPjw3tcVzrkY4/M8OeeUkpSyiTGWUu77zjlzzoUQ7/sCQCll27au6xhj68c0Tc659yPnfBxH470vpTjnEJFzDgBExBgrpczz3Lbtuq7jOA7D0Pe9tbaaEXFZlr/klBIR+Q8iqkMAwBhTSgkh6gshhGomot+zfwD7FxiurKT7dgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Long format tibble\",\n    \"title\": \"Long format tibble\",\n    \"src\": \"/static/2e03b3dfb5f00ea4cb05f53fc728c9bd/44507/long_format_tibble.png\",\n    \"srcSet\": [\"/static/2e03b3dfb5f00ea4cb05f53fc728c9bd/5243c/long_format_tibble.png 240w\", \"/static/2e03b3dfb5f00ea4cb05f53fc728c9bd/ab158/long_format_tibble.png 480w\", \"/static/2e03b3dfb5f00ea4cb05f53fc728c9bd/44507/long_format_tibble.png 750w\"],\n    \"sizes\": \"(max-width: 750px) 100vw, 750px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"This plot required more customization than the others and included a custom legend.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-r\"\n  }, \"ggplot(data = long_format_monthly_insights_df) +\\n  geom_point(mapping = aes(x = month, y = precip_day_count, color = precip_mm_range)) +\\n  facet_wrap(~ location) +\\n  labs(\\n    title = \\\"Precipitation by mm Range, 2010-2019\\\",\\n    subtitle = \\\"Days with 0mm are excluded\\\",\\n    y = \\\"Day Count\\\",\\n    x = \\\"Month\\\"\\n  ) +\\n  theme_bw() +\\n  scale_x_continuous(breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)) +\\n  scale_colour_discrete(\\n    name  = \\\"MM Ranges\\\",\\n    breaks = c(\\n      \\\"under_five_mm\\\",\\n      \\\"five_to_ten_mm\\\",\\n      \\\"ten_to_fifteen_mm\\\",\\n      \\\"fifteen_to_twenty_mm\\\",\\n      \\\"twenty_plus_mm\\\"\\n    ),\\n    labels = c(\\\"< 5\\\", \\\">= 5 & < 10\\\", \\\">= 10 & < 15\\\", \\\">= 15 & < 20\\\", \\\">= 20\\\")\\n  )\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"723px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"99.16666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXklEQVQ4y32V6W4qMQyFef+Xa/9VlapW6l4os5DFsZ3MubKZoUzhdiSTZJJ8Pl6ADQC8v7/j8fERz8/P+Pr6wsvLC97e3rDf7/H5+Ymu6/DXM03Tab6xD4Pd3d3h/v4eNzc3uL29xdPTk8O32y0+Pj4c/Pr6ioeHBx9tbUKIaAXd2GQcBozj6NYPA4au83d93+P7+9vN5qbU5jba2iK4ALbWoMyrlzZOqkBrYGbUWq+GaneXvRWQRVBtUwVVFdXWImgqrmCB/jZVdVsBSyl+qU3TEbYAzQEzcor/BYrIJdAmwoxml1yVHi+05iFRzn5xCc+szXuLQk/RbB6yzDC3MwUO/CNkmc+fP942rmCaTp4XdQtwUbiyGWr7u93OK27rTQgBlsdrCsyyKSQ65vZ3UUQghRDGAcaZpoaN9ZOeHf6dK89hKWjm9Cy/DiwFrIzECbvtzqFeZb3i/aQwxWOO2wIyU1SiGViRimDoew//J4ez1/WoyDlCRI9rLx7/VNmcirVZ9cJ5UQyWc1iFelRhbUGnoqiedcB89rwPl17cHCuVIJJcUWsTRC0N7JU0hcwGJWiVU/Obg1LC9cZWC6kqmKOrEhsNoOwK7SIp+Zmm1UPXSiC2pudLYGYGVYHW4uqKKakNQQldiOgjIYuCJKFoRq0FIRF2I3l+L34cxsgIuaJLisQV+8CIVHGIDYdoCgWHWBGpYQgBKRMSA0XqZcjeGiGBcsFhzKBUkE1RJsSYvQ89bLNMGAMhJnOSkVPywqyA9qFzxSwfogLm4mui7H8FMcZ5fz4j4t8usoZvbQX8B90NHLjzxwNuAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Precipitation by mm range\",\n    \"title\": \"Precipitation by mm range\",\n    \"src\": \"/static/16ecd46ecd276d47080a63e938fac2d1/ac4f7/precipitation_by_mm_range.png\",\n    \"srcSet\": [\"/static/16ecd46ecd276d47080a63e938fac2d1/5243c/precipitation_by_mm_range.png 240w\", \"/static/16ecd46ecd276d47080a63e938fac2d1/ab158/precipitation_by_mm_range.png 480w\", \"/static/16ecd46ecd276d47080a63e938fac2d1/ac4f7/precipitation_by_mm_range.png 723w\"],\n    \"sizes\": \"(max-width: 723px) 100vw, 723px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h3\", null, \"Conclusion\"), mdx(\"p\", null, \"The findings show that Vancouver gets higher volumes of precipitation in shorter, isolated periods, while maintaining clear seasons with far less rain in Summer. In contrast, Shannon typically has far fewer consecutive dry days and far more days with 0 to 5 mm of rainfall.\\nUltimately, with something as arbitrary as complaining about the weather, people are always going to find an angle to lament their own experiences. In that spirit I\\u2019m going to conclude that Ireland has more cause to complain on the grounds that its weather requires its people to carry umbrellas on a higher number of days per year.\"), mdx(\"p\", null, \"This project\\u2019s source code is viewable on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/oisinBates/shannon_vancouver_weather_data\"\n  }, \"GitHub\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Having moved from the West of Ireland to the Pacific North West I was interested to observe that, while both people regularly complain aboutâ€¦","timeToRead":3,"banner":null}},"pageContext":{"slug":"/analyzing-and-visualizing-weather-data-with-r","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}